<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous"/>


		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<style>
			.reveal i{
				font-family: 'FontAwesome';
				font-style: normal;
			}
			.red{
				color:rgb(255, 150, 150);
			}
			.green{
				color:rgb(150, 255, 150);
			}
			.yellow{
				color:rgb(255, 255, 123);
			}
			.blue{
				color:rgb(150, 150, 255);
			}

			.row{
				display:flex;
				flex-direction:row;
				justify-content: space-around;
			}
			.box{
				border:1px solid white;
				padding:15px;
				margin:5px;
				font-size:24pt;
			}
			.emph{
				font-style:italic;
			}
			.ul{
				text-decoration: underline;
			}

			.small{
				scale:0.9;
			}

			.smaller{
				scale:0.8;
			}

			.smallest{
				scale:0.6;
			}

			textarea::selection{
				color:black;
			}

			.smallerfont{
				font-size:0.8em;
			}

			.smallestfont{
				font-size:0.7em;
			}

			th{
				color:rgb(150, 255, 150);
			}

			/* first child of tr */
			/* tr > *:first-child{
				color:rgb(150, 255, 150);
			} */

			tr > *:first-child:not(.learningBased) {
				color:rgb(150, 255, 150);
			}

			.learningBased{
				color:rgb(130, 203, 255);
				font-weight: 600;
			}

			.bestMethod{
				color:rgb(130, 203, 255);
				font-weight: 600;
				text-decoration: underline;
			}


			table{
				border: 1px solid white;
				margin:5px;
			}

			.term{
				font-family: monospace;
				background:rgba(255,255,255,0.4);
				box-shadow: inset 0px 0px 5px white;
				padding:4px;
				border-radius:4px;
				font-size:0.75em;
			}

			/* make non-first-child td right-aligned */
			.reveal table tr td:not(:first-child){
				text-align:right;
			}

			table td, table th{
				border-right: 1px solid white;
			}

		</style>		<div class="reveal">
			<div class="slides">
				<section>
					<h3>Search Strategy Selection for Automated Theorem Proving</h3>
					<hr>
					<h4>Jack McKeown</h4>
					<h6>Advised by Geoff Sutcliffe</h6>
				</section>

				<section id="outline">
					<h3>Outline</h3>
					<div class="box">
						<ol>
							<li class="fragment">First-order logic & CNF</li>
							<li class="fragment">Saturation-based ATP</li>
							<li class="fragment">Given clause selection</li>
							<li class="fragment">E's proof search strategies</li>
							<li class="fragment">Relevant previous work</li>
							
							<li class="fragment">Reinforcement learning for given clause selection</li>
								<ul class="small">
									<li class="fragment">Proximal Policy Optimization (PPO)</li>
									<li class="fragment">My RL setup for given clause selection</li>
								</ul>
							</li>
							<li class="fragment">E strategy merging</li>
							<li class="fragment">Conclusion / future research</li>
						</ol>
					</div>
				</section>




				<section id="firstOrderLogic">
					<h3>First Order Logic</h3>
					<hr>
					<ul class="small">
						<li class="fragment"><span class="green">Propositions and logical connectives</span> <br>(from propositional logic)<br><br></li>
						<li class="fragment"><span class="green">Variables</span></li>
						<li class="fragment"><span class="green">Functions</span> (which produce non-booleans)</li>
						<li class="fragment"><span class="green">Predicates</span> (which produce booleans)</li>
					</ul>
				</section>

				<section id="clauseNormalForm">
					<h3>Clause Normal Form</h3>
					<div class="box">
						This first order statement: 
						<span class="red">
							$$ \forall X \exists Y : p(X,f(Y)) \; \vee \; (q(X)\wedge q(Y))$$
						</span>
						<span class="fragment">
							becomes
							<span class="green">
								$$ \underbrace{p(X, f(sk(X))) \; \vee \; q(X)}_{clause} \;\; \bigwedge \;\; \underbrace{p(X, f(sk(X))) \; \vee \;q(sk(X))}_{clause} $$
							</span>
							in Clause Normal Form (CNF).<br>
							(All variables are universally quantified.)
						</span>
					</div>
				</section>

				<section id="saturation">
					<h3>Saturation</h3>
					<ul class="smallerfont">
                  <li class="fragment"><span class="green">Saturation:</span> Compute the closure with sound inference rules</li>
                  <li class="fragment">A <span class="green">problem</span> is a <span class="green">conjecture</span> with <span class="green">axioms</span></li>
						<li class="fragment">
							Prove conjecture $C$ from $Axioms$ by showing that <br>
							&nbsp;&nbsp;&nbsp;&nbsp;<span class="green">CNF($Axioms \cup \{\sim C\}$)</span><br> is unsatisfiable
						</li>
						<li class="fragment">Show unsatisfiability by inferring the empty clause via saturation</li>
					</ul>

				</section>

				<section id="givenClauseSelection">
					<h3>Given Clause Selection</h3>
					<img src="images/processedAndUnprocessedSets7.svg" style="background:white">
					<ul>
                  <li style="font-size: 0.7em;" class="fragment">Inferred clauses can be redundant <span class="green fragment">or</span> <span class="fragment">make other clauses redundant</span></li>
						<li style="font-size: 0.7em;" class="fragment">Improving given clause selection is a core goal of ATP research</li>
					</ul>
				</section>

				<section id="eprover">
					<h4>The E Theorem Prover</h4>
					<ul class="smallerfont">
						<li class="fragment">
							Saturation-based prover for full first-order logic with equality
							<ul>
								<li class="fragment">Now with full higher-order support!</li>
							</ul>
						</li>
						<li class="fragment">High-performance
							<ul>
								<li class="fragment">Written in C</li>
								<li class="fragment">Careful management of resources</li>
							</ul>
						</li>
						<li class="fragment">Can automatically select proof-search guidance strategies:
							<ul>
								<li class="fragment smallerfont"> <span class="term">--auto</span></li>
								<li class="fragment smallerfont"> <span class="term">--auto-schedule</span></li>
							</ul>
						</li>
						<li class="fragment">Developed by Stephan Schulz (thank you üôè)</li>
					</ul>

				</section>

				<section id="eQueues">
					<section>
						<h4>Given Clause Selection Queues in E</h4>
						<style>
							.Equeue{
								display: flex;
								padding: 0.3em;
								width:   100%;
								align-items: center;
							}
							.Eclause{
								width:  0.8em;
								height: 0.8em;
								margin: 0.1em 0.2em;
								align-items: center;
								display: flex;
								justify-content: center;
							}
						</style>
						<div class="Equeue box">
							<div class="Eclause"> $\leftarrow$</div>
							<div class="box Eclause" style="background-color:rgb(150, 255, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 150, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 255, 123)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 150, 255)"></div>
							<div class="box Eclause" style="background-color:rgb(250, 170, 10)"></div>
							<div class="Eclause">$...$</div>
							<div style="width:2em;"></div>
							<div class="smallerfont">10*Clauseweight(PreferGoals,1,1,1)</div>
						</div>
	
						<div class="Equeue box">
							<div class="Eclause"> $\leftarrow$</div>
							<div class="box Eclause" style="background-color:rgb(150, 255, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 255, 123)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 150, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(250, 170, 10)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 150, 255)"></div>
							<div class="Eclause">$...$</div>
							<div style="width:2em;"></div>
							<div class="smallerfont">5*Clauseweight(PreferNonGoals,1,1,1)
							</div>
						</div>
	
						<div class="Equeue box">
							<div class="Eclause"> $\leftarrow$</div>
							<div class="box Eclause" style="background-color:rgb(255, 255, 123)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 150, 255)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 255, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(250, 170, 10)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 150, 150)"></div>
							<div class="Eclause">$...$</div>
							<div style="width:2em;"></div>
							<div class="smallerfont">8*Clauseweight(ByHornDist,1,1,1)</div>
						</div>
	
						$\vdots$
	
	
						<div class="Equeue box">
							<div class="Eclause"> $\leftarrow$</div>
							<div class="box Eclause" style="background-color:rgb(255, 150, 150)"></div>
							<div class="box Eclause" style="background-color:rgb(255, 255, 123)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 150, 255)"></div>
							<div class="box Eclause" style="background-color:rgb(250, 170, 10)"></div>
							<div class="box Eclause" style="background-color:rgb(150, 255, 150)"></div>
							<div class="Eclause">$...$</div>
							<div style="width:2em;"></div>
							<div class="smallerfont">1*FIFOWeight(ConstPrio)</div>
						</div>
	
						<textarea  cols="50" rows="8" style="overflow: hidden;">
Example Heuristic in E:
(fixed for a proof attempt)

10 * Clauseweight(PreferGoals,1,1,1),
 5 * Clauseweight(PreferNonGoals,1,1,1),
 8 * Clauseweight(ByHornDist,1,1,1),
...
1 * FIFOWeight(ConstPrio)
						</textarea>
					</section>


					<section>
						<h3>Example E Strategy</h3>
						<pre>
							<code style="line-height:1.1em; font-size:0.6em; max-height:500px;">
{
   ordertype:               KBO6
   to_weight_gen:           precedence
   to_prec_gen:             invfreqhack
   rewrite_strong_rhs_inst: true
   to_pre_prec:             ""
   conj_only_mod:           0
   conj_axiom_mod:          0
   axiom_only_mod:          0
   skolem_mod:              0
   defpred_mod:             0
   force_kbo_var_weight:    false
   to_pre_weights:          ""
   to_const_weight:         0
   to_defs_min:             false
   lit_cmp:                 1
   lam_w:                   20
   db_w:                    10
   ho_order_kind:           lfho
}
no_preproc:                     false
eqdef_maxclauses:               20000
eqdef_incrlimit:                20
formula_def_limit:              24
sine:                           "Auto"
add_goal_defs_pos:             false
add_goal_defs_neg:             false
add_goal_defs_subterms:        false
heuristic_name: Default
heuristic_def: "(1.ConjectureRelativeSymbolWeight(SimulateSOS,0.5,100,100,100,100,1.5,1.5,1),
               4.ConjectureRelativeSymbolWeight(ConstPrio,0.1,100,100,100,100,1.5,1.5,1.5),
               1.FIFOWeight(PreferProcessed),
               1.ConjectureRelativeSymbolWeight(PreferNonGoals,0.5,100,100,100,100,1.5,1.5,1),
               4.Refinedweight(SimulateSOS,3,2,2,1.5,2))"
prefer_initial_clauses:         false
selection_strategy:             SelectComplexExceptUniqMaxHorn
pos_lit_sel_min:                0
pos_lit_sel_max:                9223372036854775807
neg_lit_sel_min:                0
neg_lit_sel_max:                9223372036854775807
all_lit_sel_min:                0
all_lit_sel_max:                9223372036854775807
weight_sel_min:                 0
select_on_proc_only:            false
inherit_paramod_lit:            false
inherit_goal_pm_lit:            false
inherit_conj_pm_lit:            false
enable_eq_factoring:            true
enable_neg_unit_paramod:        true
enable_given_forward_simpl:     true
pm_type:                        ParamodSim
ac_handling:                    1
ac_res_aggressive:              true
forward_context_sr:             true
forward_context_sr_aggressive:  false
backward_context_sr:            false
forward_subsumption_aggressive: false
forward_demod:                  2
prefer_general:                 false
condensing:                     false
condensing_aggressive:          false
er_varlit_destructive:          true
er_strong_destructive:          true
er_aggressive:                  true
split_clauses:                  0
split_method:                   0
split_aggressive:               false
split_fresh_defs:               true
rw_bw_index_type:               FP7
pm_from_index_type:             FP7
pm_into_index_type:             FP7
sat_check_grounding:            ConjMinMinFreq
sat_check_step_limit:           5000
sat_check_size_limit:           9223372036854775807
sat_check_ttinsert_limit:       9223372036854775807
sat_check_normconst:            false
sat_check_normalize:            false
sat_check_decision_limit:       10000
filter_orphans_limit:           9223372036854775807
forward_contract_limit:         9223372036854775807
delete_bad_limit:               2000000000
mem_limit:                      0
watchlist_simplify:             true
watchlist_is_static:            false
use_tptp_sos:                   false
presat_interreduction:          true
detsort_bw_rw:                  false
detsort_tmpset:                 false
arg_cong:                       all
neg_ext:                        off
pos_ext:                        off
ext_rules_max_depth:            -1
inverse_recognition:            false
replace_inj_defs:               false
lift_lambdas:                  true
lambda_to_forall:              true
unroll_only_formulas:          true
elim_leibniz_max_depth:        -1
prim_enum_mode:                pragmatic
prim_enum_max_depth:           -1
inst_choice_max_depth:         -1
local_rw:                      false
prune_args:                    false
preinstantiate_induction:      false
fool_unroll:                   true
func_proj_limit:               0
imit_limit:                    0
ident_limit:                   0
elim_limit:                    0
unif_mode:                     single
pattern_oracle:                true
fixpoint_oracle:               true
max_unifiers:                  4
max_unif_steps:                256</code>
						</pre>
					</section>
				</section>







				<section id="gcsSupervisedLearning">
					<h3>GCS as Supervised Learning</h3>
					<ul class="smallerfont">
						<li class="fragment">Learn a function to evaluate clauses: <span class="green">$f_\theta(clause, context) \rightarrow score$</span></li>
						<li class="fragment"><span class="yellow">Clause representation</span> is linked with <span class="yellow">$f_\theta$'s structure</span> </li>
						<li class="fragment"><span class="green">$f$</span> 
							is trained as a classifier using successful proofs:
							<ul>
								<li class="fragment"><span class="green">positive examples:</span> proof clause selections.</li>
								<li class="fragment"><span class="red">negative examples:</span> all other clause selections</li>
							</ul>
						</li>
						<div class="box fragment" style="padding-left:2em;margin-left:-2em;">
							<h4 style="margin-bottom:0px">Drawbacks</h4>
							<li class="fragment red">Usually relies on consistent signature</li>
							<li class="fragment red">Highly unbalanced training data <br>(most selected clauses aren't in the proof)</li>
                     <li class="fragment red">One classifier evaluation per inferred clause</li>
						</div>
					</ul>
				</section>


				<section id="prevWork">

					<section id="enigma">
						<h4>Previous Work: <span class="green">ENIGMA</span></h4>
						<div class="row">
							<ul style="font-size:0.7em;width:100%;">
								<br>
								<li class="fragment">Clause features count tree walks</li>
								<li class="fragment">Feature hashing</li>
								<li class="fragment">Negated conjecture context<hr></li>
								<li class="fragment">Clause evaluation from classifier probability</li>
								<li class="fragment">Compared with a <span class="green">Recursive</span> Neural Network</li>
								<li class="fragment">
									<span>XGBoost</span>
									<span class="fragment"><span class="green">&gt;</span> LibLinear</span>
									<span class="fragment"><span class="green">&gt;</span> NN</span>
									<span class="fragment"><span class="green">&gt;</span> baseline</span>
								</li>
							</ul>
							<div class="smallerfont">
								<img src="images/clauseGraph.png" style="height:250px">
								<span class="green smallerfont">$p(X,f(sk(X),g(b),g(Y)))$</span>
							</div>
						</div>
						<aside class="notes">
							
						</aside>
					</section>

					<!--  -->

					<section id="trail">
						<h4>Previous Work: <span class="green">TRAIL</span></h4>
						<div class="row"></div>
						<ul class="smallerfont">
							<li class="fragment">Efficient vectorization as in ENIGMA</li>
							<li class="fragment">Full processed set context</li>
							<li class="fragment">First saturation-based RL method</li>
							<li class="fragment">Each context clause votes on its "favorite" unprocessed clause</li>
							<li class="fragment">Substantially improved base prover performance (Beagle)</li>
							<li class="fragment">Close to E <span class="term">--auto</span> performance</li>
						</ul>
						<aside class="notes">
							
						</aside>
					</section>

					<!--  -->

					<section id="hindsightExperienceReplay">
						<h4>Previous Work: <span class="green">Hindsight Experience Replay</span></h4>
						<ul class="smallerfont">
							<li class="fragment">Another "in-proofness" classifier CEF</li>
							<li class="fragment">Hindsight Experience Replay (DeepMind - 2017)</li>
							<li class="fragment">Provides extra training data using "hindsight goals":
								<ul class="smallerfont">
									<li class="fragment">Failed to saturate <span class="green">$CNF(Ax \cup \{\sim C\})$</span></li>
									<li class="fragment">Create a synthetic problem <span class="green">$CNF(Ax \cup \{\sim C, \sim D\})$</span> from any clause <span class="green">$D$</span> derived during the attempt</li>
								</ul>
							</li>
							<li class="fragment">Transformer network with graph laplacian positional embeddings</li>
							<li class="fragment">Beats E's <span class="term">--auto</span> mode and even <span class="term">--auto-schedule</span>!</li>
						</ul>
						<aside class="notes">
							
						</aside>
					</section>
				</section>



				<section id="basicIdea">
					<h3>General Idea of My Research</h3>
					<ul class="smallerfont">
						<li class="fragment">Use reinforcement learning to learn a policy that
							<ul>
								<li class="fragment">dynamically decides which queue (CEF) to use</li>
								<li class="fragment">based on efficiently tracked state within E</li>
							</ul>
						</li>
						<li class="fragment">E &nbsp;&nbsp;<span class="green">$\leftarrow$named pipes$\rightarrow$</span>&nbsp;&nbsp; PyTorch</li>
						<li class="fragment green">Sidesteps clause representation</li>
						<li class="fragment green">Little overhead compared to neural clause evaluation</li>
					</ul>

					<textarea class="fragment" cols="50" rows="9" style="overflow: hidden;">
Example Heuristic in E:
(fixed for a proof attempt)

10 * Clauseweight(PreferGoals,1,1,1),
 8 * Clauseweight(PreferNonGoals,1,1,1),
 5 * Clauseweight(ByHornDist,1,1,1),
 1 * FIFOWeight(ConstPrio)
...
												
					</textarea>
					<textarea class="fragment" cols="50" rows="9" style="overflow: hidden;">
Example "heuristic" in RL mode 
(probabilities change during proof attempt):

0.5 * Clauseweight(PreferGoals,1,1,1),
0.2 * Clauseweight(PreferNonGoals,1,1,1),
0.1 * Clauseweight(ByHornDist,1,1,1),
0.1 * FIFOWeight(ConstPrio),
...
					</textarea>
				</section>


				<section id="RL">
					<section>
						<h3>RL / Policy Gradients Background</h3>
						<ul style="font-size: 0.7em;">
							<li class="fragment">States, Actions and Rewards</li>
							<li class="fragment" style="line-height: 1.9em;">Policy:
								<span class="green fragment">$\pi(s) = a$</span> <span class="fragment">&nbsp;&nbsp;OR&nbsp;&nbsp;</span>
								<span class="green fragment">$\sum_a \pi(s,a) = 1$</span>
							</li>
							<li class="fragment">Goal: <span class="green">Maximize expected future discounted
									rewards</span></li>
							<li class="fragment" style="line-height: 2.1em;">Policy Gradient Loss:
								$\displaystyle\frac{1}{T}\sum_{t=1}^T [$
								<span class="green fragment"
									style="padding:1em 0em;font-size:0.8em;">$-\log{(\pi(s_t,a_t))}$</span>
								<span class="fragment">
									$\cdot $
									<span class="blue">$R_t$</span>
								</span>
								$]$
							</li>
	
	
							<li class="fragment" style="line-height: 2.1em;">Reducing Variance:
								$\displaystyle\frac{1}{T}\sum_{t=1}^T [$
								<span class="green"
									style="padding:1em 0em;font-size:0.8em;">$-\log{(\pi(s_t,a_t))}$</span>
								<span>
									$\cdot $
									<span class="red">$A_t$</span>
								</span>
								$]$
							</li>
							<li class="fragment">
								<span class="red">
									$A_t$
								</span>
								$=$
								<span class="blue">$R_t$</span> $- V(s_t)$
							</li>
						</ul>
	
						<aside class="notes">
							+ taking actions from states to obtain rewards.
							+ PG Loss is negative log likelihood of actions times future rewards.
							+ Subtracting baseline can help reduce the PG variance without changing the expected value.
							+ This is called Actor-critic where the actor is the policy and the critic is the learned baseline.
						</aside>
					</section>
	
					<section>
						<h3>Proximal Policy Optimization (PPO)</h3>
						<ul style="font-size:0.7em;">
							<!-- <li class="fragment">Simpler successor to Trust Region Policy Optimization (TRPO)</li> -->
							<li class="fragment">Main Idea: <span class="green">Learn from the same data multiple times in
									mini-batches</span></li>
							<span class="fragment">
								<li>A special loss limits the gradient so that 
									<span class="green">$0.8\pi_{old}(s,a) \leq \pi(s,a) \leq 1.2\pi_{old}(s,a)$</span>
								</li>
								<ul>
									<li>$r_t(\theta) = \frac{\pi_{\theta}(a_t | s_t)}{\pi_{\theta_{old}}(a_t |
										s_t)}$</li>
									<li>$L_{actor}(\theta) = \displaystyle\frac{1}{T}\sum_{t=1}^T [min($ 
										<span class="green">$r_t(\theta)A_t$</span> $, $ 
										<span class="red">$clip(r_t(\theta),1-\epsilon, 1+\epsilon)A_t$</span> $)]$
									</li>
								</ul>
							</span>
						</ul>
						<aside class="notes">
							+ PPO makes multiple mini-batch gradient steps from a batch of episodes.
							+ This has potential to be problematic if the policy changes too much as the data is no longer representative.
							+ PPO limits the magnitude of the overall policy change.
						</aside>
					</section>
				</section>



				<section id="ReinforcementLearning">

					<section>
						<h3>RL State in E</h3>
						<ul class="small">
							<li>
								<span>
									$($
									<span class="green">$t$</span>,
									<span class="green">$|P|$</span>,
									<span class="green">$|U|$</span>,
									<span class="green">$W(P)$</span>,
									<span class="green">$W(U)$</span>
									$)$
								</span>
							</li>
							<hr>
							<li class="fragment smallerfont"><span class="green">$t$</span> - Number of clause selections performed so far</li>
							<li class="fragment smallerfont"><span class="green">$|P|$</span> - Number of clauses in the processed set</li>
							<li class="fragment smallerfont"><span class="green">$|U|$</span> - Number of clauses in the unprocessed set</li>
							<li class="fragment smallerfont"><span class="green">$W(P)$</span> - Average weight of the clauses in the processed set</li>
							<li class="fragment smallerfont"><span class="green">$W(U)$</span> - Average weight of the clauses in the unprocessed set</li>
						</ul>
					</section>

					<section>
						<h3>RL Actions in E / Strategy Curation</h3>
						<ul class="small">
							<li class="fragment smallerfont">Choice from a <span class="green">fixed set</span> of CEFs<hr></li>

							<li class="fragment smallerfont">To determine this <span class="green">fixed set for each dataset:</span>
								<ul>
									<li class="fragment">Run E with <span class="term">--auto --print-strategy</span> on all problems</li>
									<li class="fragment">Merge these strategies into one <span class="green">master strategy</span>
										<ul>
											<li class="fragment" style="font-size:0.95em;">Most <span class="green">strategy</span> components set to their most common value</li>
											<li class="fragment" style="font-size:0.95em;">Every CEF is included in the <span class="green">master strategy</span> heuristic
                                    <ul>
										<li class="fragment" style="font-size:0.95em;">Heuristic weights set to <span class="green">1</span> $\rightarrow$ <span class="green">MasterAllOnes</li>
                                       <li class="fragment" style="font-size:0.95em;">Heuristic weights set proportionately $\rightarrow$ <span class="green">MasterWeighted</li>
                                    </ul>
                                 </li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="fragment smallerfont"><hr>~40 CEFs for each dataset</li>
						</ul>
					</section>

					<section>
						<h3>RL Rewards in E</h3>
						<ul class="small">
							<li class="fragment"><span class="red">0</span> for selection of non-proof clauses</li>
							<li class="fragment"><span class="green">$\frac{1}{n}$</span> for selection of proof clauses
								<span class="smallestfont"><br>(where <span class="green">$n$</span> is the number of proof clauses)</span>
							</li>
							<li class="fragment"><hr>Rewards calculated after proof attempt
								<ul class="smallestfont"><li>Custom PPO implementation üòï</li></ul>
							</li>
						</ul>
					</section>
	
				</section>

				<section id="experimentalSetup">
					<section>
						<h3>Training Architecture</h3>
						<img src="images/training_architecture.svg" style="background:rgba(255,255,255,0.8)">
					</section>

					<section>
						<h3>Testing Architecture</h3>
						<img src="images/testing_architecture.svg" style="background:rgba(255,255,255,0.8)">
					</section>
	
					<section>
						<h3>Approaches Compared</h3>
						<ul style="font-size:0.7em;">
							<li class="fragment" style="margin-bottom:10px;line-height:1.3em;">
								<span class="green term" style="text-decoration:underline">--auto</span>:
								<span class="smallfont">E's best strategy <span class="yellow">(other than <span class="term">--auto-schedule</span>)</span></span>
							</li>
							<li class="fragment" style="margin-bottom:10px;line-height:1.3em;">
								<span class="green" style="text-decoration:underline">MasterAllOnes / MasterWeighted</span>:
								<span class="smallfont"> 
									<br><span class="yellow">(Derived from <span class="term">--auto</span> over that dataset)</span>
								</span>
							</li>



							<li class="fragment" style="margin-bottom:10px;line-height:1.3em;">
								<span class="blue" style="text-decoration:underline">Constant Categorical</span>:
								<span class="smallfont">
									Randomly samples CEF from a learned distribution
									<br><span class="yellow">(Ignores RL State)</span>
								</span>
							</li>
							<li class="fragment" style="margin-bottom:10px;line-height:1.3em;">
								<span class="green" style="text-decoration:underline">Distilled Categorical</span>:
								<span class="smallfont">
									ConstCat reduced to a standard E heuristic.
									<br><span class="yellow">(Removes randomness and overhead)</span>
								</span>
							</li>

							<li class="fragment" style="margin-bottom:10px;line-height:1.3em;">
								<span class="blue" style="text-decoration:underline">Neural Network</span>:
								<span class="smallfont">A shallow neural network policy</span>
							</li>

						</ul>
					</section>

					<section>
						<h3>Datasets</h3>
						<ul style="font-size:0.7em;">
							<li class="fragment"><span class="green">MPTPTP2078</span> - Small First Order Problems
								<ul>
									<li class="fragment">Mizar Mathematical Library</li>
								</ul>
							</li>
							<br>
							<li class="fragment"><span class="green">VBT</span> - Big Typed First Order Problems
								<ul>
									<li class="fragment"><em style="text-decoration: underline;">van Emde Boas Trees</em> entry in Isabelle's Archive of Formal Proofs (AFP)</li>
									<li class="fragment">Used in CASC-J11</li>
								</ul>
							</li>
							<br>
							<li class="fragment"><span class="green">SLH-29</span> - Medium-sized Higher Order Problems
								<ul>
									<li class="fragment">From Isabelle's Sledgehammer mode</li>
									<li class="fragment">Used in CASC-J11</li>
								</ul>
							</li>
						</ul>
					</section>
	
					<section>
						<h3>Experiment Details</h3>
						<ul style="font-size:0.7em;">
							<li class="fragment"><span class="green">Soft CPU limit</span> for non-learning methods: <span class="blue">60 seconds</span></li>
							<li class="fragment"><span class="green">Soft CPU limit</span> for learning methods: <span class="blue">75 seconds</span>
								<ul>
									<li class="fragment">This was done to account for named pipe communication latency</li>
								</ul>
							</li>
							<li class="fragment"><span class="red">Hard CPU limit</span> = <span class="green">Soft CPU limit</span> + <span class="blue">5 seconds</span></li>
						</ul>
					</section>
				</section>

				<section id="summarizedResults">
					<section id="solvedTables">
						<h3>Number of Problems Solved</h3>
						<div class="row">

							<table style="font-size:0.4em;">
								<tr><th></th><th></th><th>MPTPTP2078</th></tr>
								<tr>                                                                                                                                                                                                                                                                                                                       
									<th>Run</th>                                                                                                                                                                                                                                                                                                               
									<th>Solved</th>                                                                                                                                                                                                                                                                                                            
									<th>vs <span class='term'>--auto</span></th>                                                                                                                                                                                                                                                                                                    
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">NeuralNet</td>                                                                                                                                                                                                                                                                                                             
									<td>1235</td>                                                                                                                                                                                                                                                                                                              
									<td>+128 , -45</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">ConstCat</td>                                                                                                                                                                                                                                                                                                       
									<td>1234</td>                                                                                                                                                                                                                                                                                                              
									<td>+123 , -43</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterAllOnes</td>                                                                                                                                                                                                                                                                                              
									<td>1219</td>                                                                                                                                                                                                                                                                                                              
									<td>+115 , -47</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterWeighted</td>                                                                                                                                                                                                                                                                                                     
									<td>1210</td>                                                                                                                                                                                                                                                                                                              
									<td>+113 , -54</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>ConstCatDistilled</td>                                                                                                                                                                                                                                                                                       
									<td>1206</td>                                                                                                                                                                                                                                                                                                              
									<td>+111 , -56</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td><span class='term'>--auto</span></td>                                                                                                                                                                                                                                                                                                           
									<td>1151</td>                                                                                                                                                                                                                                                                                                              
									<td class="red">N/A</td>                                                                                                                                                                                                                                                                                                           
								</tr>                                                                                                                                                                                                                                                                                                                      
							</table>
							<table style="font-size:0.4em;">
								<tr><th></th><th></th><th>VBT</th></tr>
								<tr>                                                                                                                                                                                                                                                                                                                       
									<th>Run</th>                                                                                                                                                                                                                                                                                                               
									<th>Solved</th>                                                                                                                                                                                                                                                                                                            
									<th>vs <span class='term'>--auto</span></th>                                                                                                                                                                                                                                                                                                    
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterWeighted</td>                                                                                                                                                                                                                                                                                                     
									<td>2841</td>                                                                                                                                                                                                                                                                                                              
									<td>+269 , &nbsp;-&nbsp;65</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>ConstCatDistilled</td>                                                                                                                                                                                                                                                                                       
									<td>2813</td>                                                                                                                                                                                                                                                                                                              
									<td>+285 , -109</td>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">ConstCat</td>                                                                                                                                                                                                                                                                                                       
									<td>2724</td>                                                                                                                                                                                                                                                                                                              
									<td>+218 , -143</td>                                                                                                                                                                                                                                                                                                       
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterAllOnes</td>                                                                                                                                                                                                                                                                                              
									<td>2701</td>                                                                                                                                                                                                                                                                                                              
									<td>+215 , -151</td>                                                                                                                                                                                                                                                                                                       
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                  
									<td><span class='term'>--auto</span></td>                                                                                                                                                                                                                                                                                                           
									<td>2637</td>                                                                                                                                                                                                                                                                                                              
									<td class="red">N/A</td>                                                                                                                                                                                                                                                                                                           
								</tr>
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">NeuralNet</td>                                                                                                                                                                                                                                                                                                             
									<td>2631</td>                                                                                                                                                                                                                                                                                                              
									<td>+160 , -179</td>                                                                                                                                                                                                                                                                                                       
								</tr>                                                                                                                                                                                                                                                                                                                      
								</table>         
						</div><br>
						<div class="row">
							<table style="font-size:0.4em;">
								<tr><th></th><th></th><th>SLH-29</th></tr>
								<tr>
									<th>Run</th>
									<th>Solved</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>3743</td>
									<td>+493 , -146</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>3686</td>
									<td>+471 , -188</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>3686</td>
									<td>+449 , -193</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>3642</td>
									<td>+457 , -211</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>3510</td>
									<td>+426 , -312</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>3396</td>
									<td class="red">N/A</td>
								</tr>
							</table>
							<ul class="smallestfont" style="width:47%;margin-left:4%;">
								<li class="fragment smallerfont">Strategy selection is most important</li>
								<li class="fragment smallerfont">Best results on <span class="green">MPTPTP2078</span>
									<ul>
										<li class="fragment">Successfully learned to find proofs</li>
                              <li class="fragment">More proofs make users happy üéâ</li>
									</ul>
								</li>
								<li class="fragment smallerfont">Promising as part of a portfolio<br> 
									<ul>
										<li><span class="term">--auto-schedule</span></li>
									</ul>
									
								</li>
							</ul>
						</div>
                 

					</section>
					
					
					<section id="processedTables">
						<h3>Number of Given Clauses</h3>
						<div class="row">

							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>MPTPTP2078</th></tr>

								<tr>
									<th>Run</th>
									<th>Given Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>88</td>
									<td>-3846</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>108</td>
									<td>-3754</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>109</td>
									<td>-3623</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>128</td>
									<td class="red">N/A</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>130</td>
									<td>-3183</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>134</td>
									<td>-3513</td>
								</tr>
							</table>
							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>VBT</th></tr>

								<tr>
									<th>Run</th>
									<th>Given Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>1522</td>
									<td>-661</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>1550</td>
									<td>-596</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>1574</td>
									<td>-649</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>1581</td>
									<td>-547</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>1679</td>
									<td>-422</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>1896</td>
									<td class="red">N/A</td>
								</tr>
							</table>
						</div><br>

						<div class="row">
							<table style="font-size:0.4em;">
								<tr><th></th><th></th><th>SLH-29</th></tr>
	
								<tr>
									<th>Run</th>
									<th>Given Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>808</td>
									<td>-2247</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>850</td>
									<td>-1822</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>903</td>
									<td>-1855</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>911</td>
									<td>-1810</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>933</td>
									<td>-1769</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>1550</td>
									<td class="red">N/A</td>
								</tr>
							</table>
							
							<ul class="smallestfont" style="width:47%;margin-left:4%;">
								<li class="fragment smallerfont">Learning-based approaches require fewer given clauses for <span class="green">MPTPTP2078</span></li>
								<!-- <li class="fragment smallerfont">Fewer given clauses required by <em>all</em> methods for <span class="green">MPTPTP2078</span></li> -->
								<li class="fragment smallerfont">Indicates intelligent proof search! üéâ</li>
                        <li class="fragment smallerfont">Finding proofs faster makes users happy üéâ</li>
							</ul>
						</div>

					</section>
					
					
					<section id="generatedTables">
						<h3>Number of Generated Clauses</h3>
						<div class="row">
                                                                                                                                                                                                                                                                                                                           

							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>MPTPTP2078</th></tr>

								<tr>
									<th>Run</th>
									<th>Generated</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>160</td>
									<td>-43572</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>194</td>
									<td>-40698</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>199</td>
									<td>-40210</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>229</td>
									<td>-37017</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>242</td>
									<td class="red">N/A</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>316</td>
									<td>-41679</td>
								</tr>
							</table>
							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>VBT</th></tr>

								<tr>
									<th>Run</th>
									<th>Generated</th>
								<th>vs	 <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>4732</td>
									<td>-2306</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>5147</td>
									<td>-2167</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>5719</td>
									<td>247</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>6475</td>
									<td>-1</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>7193</td>
									<td>1016</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>8191</td>
									<td class="red">N/A</td>
								</tr>
							</table>
						</div><br>

						<div class="row">
							<table style="font-size:0.4em;">  
								<tr><th></th><th></th><th>SLH-29</th></tr>
	
								<tr>                                                                                                                                                                                                                                                                                                                       
									<th>Run</th>                                                                                                                                                                                                                                                                                                               
									<th>Generated</th>                                                                                                                                                                                                                                                                                                         
									<th>vs <span class='term'>--auto</span></th>                                                                                                                                                                                                                                                                                                 
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterWeighted</td>                                                                                                                                                                                                                                                                                                     
									<td>1636</td>                                                                                                                                                                                                                                                                                                           
									<td>-31346</td>                                                                                                                                                                                                                                                                                                         
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">NeuralNet</td>                                                                                                                                                                                                                                                                                                             
									<td>1793</td>                                                                                                                                                                                                                                                                                                           
									<td>-23796</td>                                                                                                                                                                                                                                                                                                         
								</tr>
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td>MasterAllOnes</td>                                                                                                                                                                                                                                                                                              
									<td>1802</td>                                                                                                                                                                                                                                                                                                           
									<td>-23891</td>                                                                                                                                                                                                                                                                                                         
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>1975</td>
									<td>-22190</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>2028</td>
									<td>-24429</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>3990</td>
									<td class="red">N/A</td>
								</tr>
							</table>

							<ul class="smallestfont" style="width:47%;margin-left:4%;">
								<li class="fragment">Fewer generated clauses by <em>all</em> methods for <span class="green">MPTPTP2078</span>
									<ul class="fragment smallerfont">
										<li class="fragment">Guidance via CEF selection is more reasonable with a smaller unprocessed set</li>
									</ul>
								</li>
									
							</ul>
						</div>


					</section>

					<section id="proofClauseTables">
						<h3>Proof Sizes</h3>
						<div class="row">


							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>MPTPTP2078</th></tr>

								<tr>
									<th>Run</th>
									<th>Proof Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>23</td>
									<td class="red">N/A</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>26</td>
									<td>0.30</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>26</td>
									<td>0.55</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>26</td>
									<td>0.62</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>26</td>
									<td>0.68</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>26</td>
									<td>0.73</td>
								</tr>
							</table>
							<table style="font-size:0.4em;">
							<tr><th></th><th></th><th>VBT</th></tr>

								<tr>
									<th>Run</th>
									<th>Proof Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>12</td>
									<td>-0.22</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>12</td>
									<td>-0.10</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>13</td>
									<td class="red">N/A</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>13</td>
									<td>0.13</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>12</td>
									<td>0.14</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>12</td>
									<td>0.30</td>
								</tr>
							</table>
						</div><br>

						<div class="row">
							<table style="font-size:0.4em;">
								<tr><th></th><th></th><th>SLH-29</th></tr>
								<tr>
									<th>Run</th>
									<th>Proof Clauses</th>
									<th>vs <span class='term'>--auto</span></th>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>11</td>
									<td class="red">N/A</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>11</td>
									<td>0.08</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>11</td>
									<td>0.33</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>11</td>
									<td>0.53</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>11</td>
									<td>0.56</td>
								</tr>
								<tr>
								<td class="learningBased">ConstCat</td>
								<td>11</td>
									<td>0.68</td>
								</tr>
							</table>

							<ul class="smallestfont" style="width:47%;margin-left:4%;">
								<li class="fragment">More proof clauses $\rightarrow$ more feedback for learning</li>
                        <li class="fragment">Smaller proofs make users happy
                           <ul>
                              <li class="fragment">Only VBT üòï</li>
                           </ul>
                        </li>
							</ul>
						</div>
							
					</section>

					<section id="efficiencyTables">
						<h6 class="smallerfont">Efficiency (proof clauses / Given Clauses)</h6>
						<div class="row">
							<table style="font-size:0.4em;">
							<tr><th></th><th>MPTPTP2078</th></tr>

								<tr>
									<th>Run</th>
									<th>Efficiency</th>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>0.337</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>0.286</td>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>0.279</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>0.239</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>0.224</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>0.194</td>
								</tr>
							</table>

							<table style="font-size:0.4em;">
							<tr><th></th><th>VBT</th></tr>

								<tr>
									<th>Run</th>
									<th>Efficiency</th>
								</tr>
								<tr>
									<td>MasterAllOnes</td>
									<td>0.011</td>
								</tr>
								<tr>
									<td>MasterWeighted</td>
									<td>0.011</td>
								</tr>
								<tr>
									<td class="learningBased">NeuralNet</td>
									<td>0.011</td>
								</tr>
								<tr>
									<td>ConstCatDistilled</td>
									<td>0.011</td>
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>
									<td>0.011</td>
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>
									<td>0.009</td>
								</tr>
							</table>
						</div><br>

						<div class="row">
							<table style="font-size:0.4em;">   
								<tr><th></th><th>SLH-29</th></tr>
	
								<tr>                                                                                                                                                                                                                                                                                                                       
									<th>Run</th>                                                                                                                                                                                                                                                                                                               
									<th>Efficiency</th>                                                                                                                                                                                                                                                                                                        
								</tr>                                                                                                                                                                                                                                                                                                                      
								<tr>                                                                                                                                                                                                                                                                                                                       
									<td class="learningBased">NeuralNet</td>                                                                                                                                                                                                                                                                                                             
									<td>0.018</td>                                                                                                                                                                                                                                                                                                       
								</tr>
								<tr>
									<td>MasterWeighted</td>                                                                                                                                                                                                                                                                                                     
									<td>0.018</td>                                                                                                                                                                                                                                                                                                       
								</tr>
								<tr>
									<td class="learningBased">ConstCat</td>                                                                                                                                                                                                                                                                                                       
									<td>0.017</td>                                                                                                                                                                                                                                                                                                       
								</tr>
								<tr>
									<td>MasterAllOnes</td>                                                                                                                                                                                                                                                                                              
									<td>0.017</td>                                                                                                                                                                                                                                                                                                       
								</tr>
								<tr>
									<td>ConstCatDistilled</td>                                                                                                                                                                                                                                                                                       
									<td>0.017</td>                                                                                                                                                                                                                                                                                                       
								</tr>
								<tr>
									<td><span class='term'>--auto</span></td>                                                                                                                                                                                                                                                                                                           
									<td>0.010</td>                                                                                                                                                                                                                                                                                                       
								</tr>                                                                                                                                                                                                                                                                                                                      
							</table> 
							<ul class="smallestfont" style="width:47%;margin-left:4%;">
								<li class="fragment">~2% for <span class="green">VBT</span> and <span class="green">SLH-29</span></li>
								<li class="fragment">~20% for <span class="green">MPTPTP2078</span></li>
							</ul>
						</div>

					</section>


					<section id="resultSummary">
						<h3>Summary of Results</h3>
						<ul class="smallerfont">
							<li class="fragment">The biggest impact on problems solved was the "strategy aggregation" done to determine the set of actions (CEFs)</li>
							<li class="fragment"><span class="green">NeuralNet</span> failed to beat <span class="green">ConstCat</span>
								<ul class="smallerfont">
									<li class="fragment">The state is not very helpful</li>
								</ul>
							</li>
							<li class="fragment">Learning was most effective for <span class="red">MPTPTP2078</span>
								<ul class="smallerfont">
									<li class="fragment">Because proofs are found in fewer given clause selections?</li>
								</ul>
							</li>
							<li class="fragment"><span class="green">Distilled ConstCat</span> beats <span class="green">ConstCat</span> and <span class="green">NeuralNet</span> on <span class="red">SLH-29</span> and <span class="red">VBT</span>, but not <span class="red">MPTPTP2078</span></li>
							<li class="fragment"><span class="green">MasterWeighted</span> beats everything for <span class="red">SLH-29</span> and <span class="red">VBT</span></li>

						</ul>
					</section>
  
               <section id="policyVisNeuralNet">
                  <h3>Policy Visualization for NeuralNet</h3>
                  <div class="row">
                     <img src="images/MPTNN0_MPT0557+1.p.png" style="max-width:33%;">
                     <img src="images/MPTNN0_MPT1592+1.p.png" style="max-width:33%;">
                  </div>
                  <div class="row smallestfont" style="position:relative; top:-0.25em;line-height:0.2em;">
                     <div class="smallestfont">MPTNN0_MPT0557</div><div class="smallestfont">MPTNN0_MPT1592</div>
                  </div>
                  <div class="row">
                     <img src="images/MPTNN1_MPT1539+1.p.png" style="max-width:33%;">
                     <img src="images/MPTNN1_MPT1964+1.p.png" style="max-width:33%;">
                  </div>
                  <div class="row smallestfont" style="position:relative; top:-0.25em;line-height:0.2em;">
                     <div class="smallestfont">MPTNN1_MPT1539</div><div class="smallestfont">MPTNN0_MPT1964</div>
                  </div>
               </section>

					<section id="policyVisConstCat">
						<h3>Policy Visualization for ConstCat</h3>
						<div class="row">
							<img src="images/MPTConstCat0_MPT0557+1.p.png" style="max-width:45%">
							<img src="images/MPTConstCat1_MPT1539+1.p.png" style="max-width:45%">
						</div>
                  <div class="row smallestfont" style="position:relative; top:-0.25em;line-height:0.2em;">
                     <div class="smallestfont">MPTConstCat0_MPT0557</div><div class="smallestfont">MPTConstCat0_MPT1539</div>
                  </div>

					</section>


					<section id="criticVis">
						<h3>Critic Visualization MPTPTP2078</h3>
						<div class="row">
							<img src="images/critic/MPT/MPTNN1.png" style="max-width:45%">
							<img src="images/critic/MPT/MPTNN1_solved_vs_unsolved.png" style="max-width:45%">
						</div>
					</section>

					<section id="criticVis">
						<h3>Critic Visualization VBT</h3>
						<div class="row">
							<img src="images/critic/VBT/VBTNN1.png" style="max-width:45%">
							<img src="images/critic/VBT/VBTNN1_solved_vs_unsolved.png" style="max-width:45%">
						</div>
					</section>

					<section id="criticVis">
						<h3>Critic Visualization SLH</h3>
						<div class="row">
							<img src="images/critic/SLH/SLHNN1.png" style="max-width:45%">
							<img src="images/critic/SLH/SLHNN1_solved_vs_unsolved.png" style="max-width:45%">
						</div>
					</section>

				</section>
















				<section>
					<section>
						<h3>üéâ Strategy Merging Works! üéâ</h3>
                  <ol class="smallerfont">
                     <li class="fragment">
                        E is invoked with <span class="term">--auto --print-strategy</span> on problems without attempting solutions.
                     </li>
                  </ol>

					</section>

					<section>
						<h3>Basic Merging Methods</h3>
						<ol>
							<li class="fragment"><span class="green">MasterAllOnes</span> - <span class="smallestfont">Heuristic weights, $h_i := 1$</span></li>
							<li class="fragment"><span class="green">MasterWeighted</span> - <span class="smallestfont">Heuristic weights, $h_i := ceil(\frac{20\cdot s_i}{\max_j(s_j)})$ where $s_i$ is the sum of heuristic weights for CEF $i$ in the <span class="term">--auto</span> strategies </span></li>
							<li class="fragment"><span class="green">MasterWeightedRR</span> - <span class="smallestfont">Like MasterWeighted but <br> 
								<span class="fragment">
									3*<span class="red">CEF1</span>, 1*<span class="green">CEF2</span>, 2*<span class="blue">CEF3</span>
									$\rightarrow$ <span class="red">1</span>,<span class="red">1</span>,<span class="red">1</span>,<span class="green">2</span>,<span class="blue">3</span>,<span class="blue">3</span>,...<br>
								</span>
								<span class="fragment">becomes <br></span>
								<span class="fragment">
									3*<span class="red">CEF1</span>, 1*<span class="green">CEF2</span>, 2*<span class="blue">CEF3</span>
									$\rightarrow$ <span class="red">1</span>,<span class="green">2</span>,<span class="blue">3</span>,<span class="red">1</span>,<span class="blue">3</span>,<span class="red">1</span>,...
								</span>
							</span></li>
						</ol>
					</section>


					<section id="ablationStudy">
						<h3>Ablation Study</h3>
						<span class="smallestfont" style="position:relative; top:-25px;">(each problem uses a distinct strategy)</span><br>
						<ol start="4">
							<li class="fragment">
								<span class="green">CommonHeuristic</span>
								<ul class="smallestfont">
									<li class="fragment"><span class="term">heuristic_def</span> from <span class="blue">MasterWeighted</span></li>
									<li class="fragment">values from <span class="term">--auto</span> for all the other 107 strategy parameters</li>
								</ul>
							</li>
							<li class="fragment">
								<span class="green">CommonElse <span class="smallestfont yellow" style="font-size:0.6em; margin-left:2em;">(converse of CommonHeuristic)</span></span>
								<ul class="smallestfont">
									<li class="fragment">values from <span class="term">--auto</span> for <span class="term">heuristic_def</span> </li>
									<li class="fragment">values from <span class="blue">MasterWeighted</span> for all the other 107 strategy parameters</li>
								</ul>
							</li>
						</ol>
					</section>
					
					<section id="hindsightStudies">
						<h3>Hindsight Studies</h3>
						<span class="smallestfont" style="position:relative; top:-25px;">(these require proof attempts before creation)</span><br>
						<ol start="6">
							<li class="fragment">
								<span class="green smallfont">MasterSuccess: <span class="fragment smallestfont yellow" style="font-size:0.55em; margin-left:0.9em;">"Can <span class="term">--auto</span> be trusted if its strategy can't solve the problem?"</span></span>
								<ul class="smallestfont">
									<!-- <li class="fragment">"Can <span class="term">--auto</span> be trusted if its strategy can't solve the problem?"</li> -->
									<li class="fragment">Only <span class="term">--auto</span> strategies that solve their problems get merged</li>
									<li class="fragment">(produces a single strategy)</li>
								</ul>
							</li>
							<li class="fragment">
								<span class="green smallfont">AutoAll: <span class="fragment smallestfont yellow" style="font-size:0.55em; margin-left:0.9em;">"What if E always picked its best strategy for every problem?"</span></span>
								<ul class="smallestfont">
									<!-- <li class="fragment">"What if E always picked its best strategy for every problem?"</li> -->
									<li class="fragment">Run all strategies on all problems and keep the best one for each problem</li>
									<li class="fragment">(produces 1 strategy per problem)</li>
								</ul>
							</li>
						</ol>
					</section>


					<section>
						<h4>Interactive Theorem Proving (ITP) Application</h4>
						<ol start="8">
							<li class="fragment">
								<span class="green">MasterIncremental</span>
								<ul class="smallestfont">
									<li class="fragment">A <span class="green">stream</span> of problems instead of a <span class="red">batch</span></li>
									<li class="fragment">Merge <span class="term">--auto</span> strategies incrementally</li>
									<li class="fragment">
										First problem's strategy = <span class="term">--auto</span>
									</li>
									<li class="fragment">
										Last problem's strategy = <span class="blue">MasterWeighted</span>
									</li>
								</ul>
							</li>
						</ol>
					</section>



					<section>
						<h3>Strategy Merging Summary</h3>
						<img src="images/stratMergingArchitecture.svg" style="background:rgba(255,255,255,0.8); max-width:750px">
					</section>


					<section>
						<h3>Strategy Merging Results</h3>
						<span class="smallestfont yellow" style="float: left">Problems Solved</span>
						<table style="font-size:0.5em; margin: 0 auto;">
							<tr>
								<th><span class="h">Dataset</span></th>
								<th><span class="h">Master<br>AllOnes</span></th>
								<th><span class="h">Master<br>Weighted</span></th>
								<th><span class="h">Master<br>Weighted<br>RR</span></th>
								<th><span class="h">Master<br>Success</span></th>
								<th><span class="h">Common<br>Heuristic</span></th>
								<th><span class="h">Common<br>Else</span></th>
								<th><span class="h">Master<br>Incr.</span></th>
								<th><span class="h term">auto</span></th>
								<th><span class="h term">auto-sched</span></th>
								<th><span class="h">Auto<br>All</span></th>
							</tr>
							<tr>
								<td><span class="h">M'2078</span></td>
								<td><span class="bestMethod">1219</span></td>
								<td>1210</td>
								<td>1201</td>
								<td>1199</td>
								<td>1170</td>
								<td>1086</td>
								<td>1199</td>
								<td>1151</td>
								<td>1279</td>
								<td>1438</td>
							</tr>
							<tr>
								<td><span class="h">VBT</span></td>
								<td>2701</td>
								<td>2841</td>
								<td><span class="bestMethod">2858</span></td>
								<td>2806</td>
								<td>2710</td>
								<td>2521</td>
								<td>2785</td>
								<td>2637</td>
								<td>2759</td>
								<td>3596</td>
							</tr>
							<tr>
								<td><span class="h">SLH-29</span></td>
								<td>3642</td>
								<td><span class="bestMethod">3743</span></td>
								<td>3565</td>
								<td>3505</td>
								<td>3430</td>
								<td>3371</td>
								<td>3556</td>
								<td>3396</td>
								<td>4050</td>
								<td>4203</td>
							</tr>
						</table>
					</section>


					<section>
						<h3>Strategy Merging Results</h3>
						<span class="smallestfont yellow" style="float: left">Median number of given clause selections</span>
						
						<table style="font-size:0.5em; margin: 0 auto;">
							<tr>
								<th><b>Dataset</b></th>
								<th><b>Master<br>AllOnes</b></th>
								<th><b>Master<br>Weighted</b></th>
								<th><b>Master<br>Weighted<br>RR</b></th>
								<th><b>Master<br>Success</b></th>
								<th><b>Common<br>Heuristic</b></th>
								<th><b>Common<br>Else</b></th>
								<th><b>Master<br>Incr.</b></th>
								<th><b class="term">--auto</b></th>
								<th><b>Auto<br>All</b></th>
							</tr>
							<tr>
								<td><b>M'2078</b></td>
								<td><span class="bestMethod">88</span></td>
								<td>89</td>
								<td>97</td>
								<td>106</td>
								<td>91</td>
								<td>98</td>
								<td>97</td>
								<td>95</td>
								<td>46</td>
							</tr>
							<tr>
								<td><b>VBT</b></td>
								<td><span class="bestMethod">1258</span></td>
								<td>1341</td>
								<td>1302</td>
								<td>1336</td>
								<td>1304</td>
								<td>1734</td>
								<td>1336</td>
								<td>1663</td>
								<td>636</td>
							</tr>
							<tr>
								<td><b>SLH-29</b></td>
								<td>883</td>
								<td><span class="bestMethod">758</span></td>
								<td>843</td>
								<td>769</td>
								<td>938</td>
								<td>1061</td>
								<td>767</td>
								<td>1453</td>
								<td>499</td>
							</tr>
						</table>
						<br>
						<span class="smallestfont yellow" style="float: left">Mean number of given clause selections</span>
						<table style="font-size:0.5em; margin: 0 auto;">
							<tr>
								<th>Dataset</th>
								<th>Master<br>AllOnes</th>
								<th>Master<br>Weighted</th>
								<th>Master<br>Weighted<br>RR</th>
								<th>Master<br>Success</th>
								<th>Common<br>Heuristic</th>
								<th>Common<br>Else</th>
								<th>Master<br>Incr.</th>
								<th><span class="term">--auto</span></th>
								<th>Auto<br>All</th>
							</tr>
							<tr>
								<td>M'2078</td>
								<td><span class="bestMethod">572</span></td>
								<td>769</td>
								<td>657</td>
								<td>797</td>
								<td>1136</td>
								<td>2782</td>
								<td>932</td>
								<td>2745</td>
								<td>119</td>
							</tr>
							<tr>
								<td>VBT</td>
								<td><span class="bestMethod">1611</span></td>
								<td>1644</td>
								<td>1657</td>
								<td>1667</td>
								<td>1678</td>
								<td>1957</td>
								<td>1647</td>
								<td>2010</td>
								<td>896</td>
							</tr>
							<tr>
								<td>SLH-29</td>
								<td>2056</td>
								<td>1526</td>
								<td>1735</td>
								<td>1539</td>
								<td>1757</td>
								<td>2694</td>
								<td><span class="bestMethod">1514</span></td>
								<td>3472</td>
								<td>715</td>
							</tr>
						</table>
					</section>


					<section>
						<h3>Strategy Merging Results</h3>
						<ul class="smallerfont">
							<li class="fragment">Strategy merging works in general</li>
							<li class="fragment"><span class="green">MasterWeightedRR</span> does not beat <span class="green">MasterWeighted</span></li>
							<li class="fragment"><span class="green">MasterSuccess</span> does not beat <span class="green">MasterWeighted</span> or <span class="green">MasterAllOnes</span></li>
							<li class="fragment">Incremental strategy merging works <br><span class="yellow" style="padding-left:2em;">(although not as well as non-incremental merging)</span></li>
							<li class="fragment">
								<span class="fragment"><span class="green">MasterWeighted</span> $>$</span>
								<span class="fragment"><span class="green">CommonHeuristic</span> $>$</span> 
								<span class="fragment"><span class="yellow term">--auto</span> $>$ </span>
								<span class="fragment"><span class="red">CommonElse</span></span>
							</li>
							<li class="fragment"><span class="green">AutoAll</span> $>>$ <span class="red">Everything</span> (as might be expected)</li>
						</ul>
					</section>

					<section>
						<h3>Incremental E Wrapper Code</h3>
						<ul class="smallerfont">
							<li class="fragment">Standalone Python program that calls E, handling incremental merging automatically.</li>
							<li class="fragment">Can also perform non-incremental merging</li>
							<li class="fragment">Being integrated into Isabelle / Sledgehammer</li>
							<li class="fragment"><a href="https://github.com/jackeown/IncrementalEWrapper">https://github.com/jackeown/IncrementalEWrapper</a></li>
						</ul>
						
					</section>



				</section>





















				<section>
					<h3>Ideas for Future Research</h3>
					<ul style="font-size: 0.6em;">
						<li class="fragment">
							Different <span class="green">state</span> representations
							<ul>
								<li class="fragment">Use a history of past states and actions as the state (frame stacking)</li>
								<li class="fragment">Incorporate features from each CEF such as:
									<ul>
										<li class="fragment">The average weight of the top few clauses in each CEF queue</li>
									</ul>
								</li>
							</ul>
						</li>
						
						<li class="fragment"><hr>Different <span class="red">action</span> representations
							<ul>
								<li class="fragment">Pick a set of CEFs by targeting diversity</li>
							</ul>
						</li>

						<li class="fragment"><hr>Different <span class="yellow">rewards</span>
							<ul>
								<li class="fragment">Use <span class="green">$\frac{1}{n-1}$</span> per proof clause to incentivize finding shorter proofs</li>
							</ul>
						</li>

						<li class="fragment"><hr>
							Use Monte Carlo Tree Search to search for a proof using the learned state values, <span class="green">$V(s)$</span>
							<ul>
								<li class="fragment">Process overhead was too high.</li>
							</ul>
						</li>

						<li class="fragment"><hr>
							Incorporate incremental strategy merging into Isabelle
						</li>
					</ul>
				</section>







            <section>
            	<h3>Conclusions and Publications</h3>

				<span class="smallestfont yellow fragment" style="display:flex; text-align:left;">Main Research Contributions</span>
				<ol class="smallestfont box fragment" style="font-size:0.5em;padding-left:2em; width:800px;">
					<li class="fragment smallfont">Novel RL approach to GCS selects CEFs <span class="green">(fewer heuristic evaluations)</span></li>
					<li class="fragment smallfont">More proofs with fewer clause selections indicates intelligent search <span class="green">(on MPTPTP2078)</span></li>
					<li class="fragment smallfont">Strategy merging is effective and is being implemented in Isabelle</li>
				</ol>
				<hr class="fragment">
				<span class="smallestfont yellow fragment" style="display:flex; text-align:left;">Publications</span>
				<ul class="smallestfont box fragment" style="font-size:0.5em;padding-left:2em; width:800px;">
					<li class="fragment">Reinforcement Learning in E - <span class="yellow">AITP 2022</span></li>
					<li class="fragment">Reinforcement Learning for Guiding the E Theorem Prover - <span class="yellow">FLAIRS 2023</span></li>
					<li class="fragment">Adaptive Strategy Curation for the E Theorem Prover - <span class="yellow">IJAIT in progress</span></li>
					<li class="fragment"><a href="https://scholar.google.com/citations?user=PdLO8A8AAAAJ">https://scholar.google.com/citations?user=PdLO8A8AAAAJ</a></li>
				</ul>

            </section>








				<section>
					<h3>Thanks for listening</h3>
					<em class="green">Questions?</em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<em class="green">Suggestions?</em><br>
				</section>

			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				hash: true,
				math: {
					mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
					config: 'TeX-AMS_HTML-full', // See http://docs.mathjax.org/en/latest/config-files.html
					// pass other options into `MathJax.Hub.Config()`
					TeX: { Macros: { RR: "{\\bf R}" } }
				},

				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/highlight/highlight.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/math/math.js', async: true }
				],

				slideNumber:true
			});


			document.addEventListener("keypress", function(e){
				if (e.key == 'u'){
					document.querySelector("#outline").classList.add("floatingOutline")
				}
			})

		</script>
	</body>
</html>
